<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      width: 450px;
      max-height: 600px;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 13px;
      overflow-x: hidden;
    }

    .header {
      background: #f8f9fa;
      padding: 16px;
      border-bottom: 1px solid #e1e4e8;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header h1 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: #24292e;
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .filter-btn {
      padding: 4px 8px;
      border: 1px solid #d1d5da;
      border-radius: 4px;
      background: white;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .filter-btn:hover {
      background: #f6f8fa;
    }

    .filter-btn.active {
      background: #0366d6;
      color: white;
      border-color: #0366d6;
    }

    .clear-btn {
      padding: 4px 8px;
      border: 1px solid #dc3545;
      border-radius: 4px;
      background: white;
      color: #dc3545;
      cursor: pointer;
      font-size: 12px;
      margin-left: auto;
    }

    .clear-btn:hover {
      background: #dc3545;
      color: white;
    }

    .history {
      max-height: 500px;
      overflow-y: auto;
      padding: 0;
    }

    .history-item {
      padding: 12px 16px;
      border-bottom: 1px solid #e1e4e8;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .history-item:hover {
      background: #f6f8fa;
    }

    .event-icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 8px;
      color: white;
      font-weight: bold;
    }

    .event-icon.tab_created { background: #28a745; }
    .event-icon.tab_closed { background: #dc3545; }
    .event-icon.tab_updated { background: #ffc107; color: black; }
    .event-icon.group_created { background: #007bff; }
    .event-icon.group_removed { background: #6f42c1; }
    .event-icon.group_updated { background: #17a2b8; }
    .event-icon.tab_attached_to_group { background: #20c997; }
    .event-icon.tab_detached_from_group { background: #fd7e14; }

    .event-details {
      flex: 1;
      min-width: 0;
    }

    .event-title {
      font-weight: 500;
      color: #24292e;
      margin-bottom: 2px;
      word-break: break-word;
    }

    .event-meta {
      font-size: 11px;
      color: #586069;
      margin-bottom: 2px;
    }

    .event-group {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 6px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 500;
      margin-top: 4px;
    }

    .group-color-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .event-url {
      font-size: 11px;
      color: #0366d6;
      text-decoration: none;
      word-break: break-all;
      display: block;
      margin-top: 2px;
    }

    .event-url:hover {
      text-decoration: underline;
    }

    .no-history {
      text-align: center;
      padding: 40px 16px;
      color: #586069;
    }

    .timestamp {
      font-size: 10px;
      color: #959da5;
      margin-left: auto;
      flex-shrink: 0;
    }

    /* Group colors */
    .group-grey { background: #f6f8fa; color: #586069; }
    .group-blue { background: #e1f5fe; color: #0277bd; }
    .group-red { background: #ffebee; color: #c62828; }
    .group-yellow { background: #fff8e1; color: #f57f17; }
    .group-green { background: #e8f5e8; color: #2e7d32; }
    .group-pink { background: #fce4ec; color: #ad1457; }
    .group-purple { background: #f3e5f5; color: #7b1fa2; }
    .group-cyan { background: #e0f2f1; color: #00695c; }
    .group-orange { background: #fff3e0; color: #ef6c00; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Tab Group History</h1>
    <div class="controls">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="tab">Tabs</button>
      <button class="filter-btn" data-filter="group">Groups</button>
      <button class="clear-btn" id="clearHistory">Clear</button>
    </div>
  </div>
  
  <div class="history" id="history">
    <div class="no-history">No history available yet. Start browsing to see tab activity!</div>
  </div>

  <script src="popup.js"></script>
</body>
</html>